정보 출처: 혼자 공부하는 자바 - 신용권 저, 
[2기_보스독 님의 블로그](https://tecoble.techcourse.co.kr/post/2020-11-07-singleton/)

# 싱글톤
> 전체 프로그램에서 **단 하나의 객체만 만들도록** 보장

* 싱글톤을 만들려면 클래스 외부에서 new 연산자로 생성자를 호출할 수 없도록 막아야 함
  * 생성자를 호출한 만큼 객체가 생성되기 때문
* 생성자를 외부에서 호출할 수 없도록 하려면 생성자 앞에 ```private``` 접근 제한자를 붙여주면 된다.
* 자신의 타입인 정적 필드를 하나 선언하고, 자신의 객체를 생성해 초기화
  * 클래스 내부에서는 new 연산자로 생성자 호출 가능
* 정적 필드도 ```private``` 접근 제한자를 붙여 외부에서 필드값을 변경하지 못하도록 막음
* 대신 외부에서 호출할 수 있는 정적 메소드인 ```getInstance()```를 선언하고 정적 필드에서 참조하고 있는 자신의 객체 리턴
```java
public class 클래스 {
    // 정적 필드
    private static 클래스 singleton = new 클래스();

    // 생성자
    private 클래스() {

    }

    // 정적 메소드
    static 클래스 getInstance() {
        return singleton;
    }
}
```
* 외부에서 객체를 얻는 유일한 방법 -> getInstance() 메소드를 호출
```
클래스 변수1 = 클래스.getInstance();
클래스 변수2 = 클래스.getInstance();
```
* 위 코드에서는 단 하나의 객체만 리턴하기 때문에 동일 객체 참조

## 싱글톤 패턴의 사용 이유
1. 메모리 낭비 방지 및 속도 개선
* 최초 한번의 new 연산자를 통해 고정된 메모리 영역을 사용하기 때문에 추후 해당 객체에 접근할 때 메모리 낭비 방지
* 이미 생성된 인스턴스를 활용해 속도 측면에서 Good

2. 데이터 공유 용이
* 싱글톤 인스턴스는 전역에서 사용되는 인스턴스이기 때문에 다른 클래스의 인스턴스들이 접근하여 사용할 수 있음
* 단, 여러 클래스의 인스턴스에서 싱글톤 인스턴스의 데이터에 동시에 접근하게 되면 **동시성 문제**가 발생할 수 있으니 유의 설계

## 싱글톤 패턴의 문제점
> 유연성이 떨어지는 패턴
1. 코드가 많이 필요
* 정적 팩토리 메서드에서 객체 생성을 확인하고 생성자를 호출하는 경우, 멀티스레딩 환경에서 발생할 수 있는 동시성 문제 해결을 위해 ```syncronized``` 키워드를 사용해야 한다.

2. 테스트 어려움
* 싱글톤 인스턴스는 자원을 공유하고 있기 때문에 테스트가 결정적으로 격리된 환경에서 수행되려면 매번 인스턴스의 상태를 초기화시켜주어야 한다.
* 그렇지 않으면 어플리케이션 전역에서 상태를 공유하기 때문에 테스트가 온전하게 수행되지 못한다.

3. 의존 관계상 클라이언트가 구체 클래스에 의존
* ```new``` 키워드를 직접 사용해 클래스 안에서 객체를 생성하고 있으므로, 이는 SOLID 원칙 중 DIP를 위반하고 OCP 원칙 또한 위반할 가능성이 있다.

